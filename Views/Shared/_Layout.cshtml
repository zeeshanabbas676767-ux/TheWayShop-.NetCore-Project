@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@{
    var userIdInt = HttpContextAccessor.HttpContext?.Session.GetInt32("Admin_Id") ?? 0;
    var userId = userIdInt > 0 ? userIdInt.ToString() : ""; // for JS use
    var Name = HttpContextAccessor.HttpContext?.Session.GetString("Admin_Name");
    var email = HttpContextAccessor.HttpContext?.Session.GetString("Admin_Email");
    var profileImage = HttpContextAccessor.HttpContext?.Session.GetString("ProfileImage")
                       ?? Url.Content("~/images/default-avatar.png");
    var uploadUrl = Url.Action("UploadProfileImage", "Home");
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - NewCoreProject</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/NewCoreProject.styles.css" asp-append-version="true" />
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet">
   
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700" rel="stylesheet">

    <!-- Site Icons -->
	<link href="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/css/all.css" rel="stylesheet" />
	<link href="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/css/bootstrap.min.css" rel="stylesheet" />
	<link href="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/css/style.css" rel="stylesheet" />
	<link href="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/css/responsive.css" rel="stylesheet" />
	<link href="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/css/custom.css" rel="stylesheet" />

    <!-- Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@300;400;500;600;700&display=swap" id="main-font-link">

    <style>
        body {
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            text-align: left;
            padding: 12px;
            color: #831081; /* soft indigo */
            font-weight: 600;
        }

        /*    tr:hover td {
                    background: rgba(255,255,255,0.05);
                    transition: background-color 0.3s ease;
                }*/
        .table-dark tr:hover td {
            background-color: black;
            transition: background-color 0.3s ease;
        }

        .table-dark td {
            padding: 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.5);
            color: #e5e7eb;
        }
        /* Navbar */
        .navbar {
            box-shadow: 0 0 10px #111;
            background: linear-gradient(#000000);
        }

        .download-button {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 25px;
            border: none;
            border-radius: 25px;
            overflow: hidden;
            cursor: pointer;
            /* base look */
            background-color: dodgerblue;
           /*  background-color: dodgerblue; */ /* #4CAF50 */
            color: white;
            font-size: 16px;
            font-weight: bold;
            transition: color 0.4s ease-in-out;
        }

            /* text container (always above everything) */
            .download-button span {
                position: relative;
                z-index: 2; /* make text the topmost layer */
                transition: color 0.4s ease-in-out;
            }

            /* black overlay behind text */
            .download-button::before {
                content: "";
                position: absolute;
                inset: 0;
                background-color:white;
                z-index: 1; /* below text, above green background */
                transform: scaleX(0);
                transform-origin: right;
                transition: transform 1.4s cubic-bezier(0.19, 1, 0.22, 1);
                border-radius: 25px;
            }

            /* green base behind everything */
            .download-button::after {
                content: "";
                position: absolute;
                inset: 0;
                background-color: dodgerblue;
                /* background-color: dodgerblue; */
                z-index: 0; /* very back */
                border-radius: 25px;
            }

            /* on hover */
            .download-button:hover::before {
                transform: scaleX(1);
                transform-origin: left;
            }

            /* text turns white on hover */
            .download-button:hover span {
                color: black;
            }

        .form-group {
            margin-bottom: 20px;
        }

        .password-wrapper {
            position: relative;
        }

        .form-control {
            width: 100%;
            padding-right: 40px; /* space for the eye icon */
        }

        .toggle-eye {
            position: absolute;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            cursor: pointer;
            color: #555;
        }

        [dir="rtl"] .toggle-eye {
            right: auto;
            left: 10px; /* move eye to the left for RTL */
        }

        .error {
            border-color: red !important;
        }

        .error-message {
            color: red;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }

        .no-marker {
            list-style-type: none; /* hides bullets/numbers */
            padding-left: 0; /* removes extra indent */
            margin-left: 0; /* optional */
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            object-fit: cover;
         /*    border: 2px solid #111; */
            transition: transform 0.3s ease;
        }
        /* Default (light theme) */
        .user-name,
        .user-email {
            color: #000;
        }
/*         .custom-navbar {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            transition: background 0.3s ease;
            border-radius: 0 0 15px 15px;
        }

            .custom-navbar .navbar-brand img {
                filter: drop-shadow(0 0 5px #fff);
            } */
            .navbar{
                
                width:100%;
            }
        .custom-btn {
            margin-left: 0px;
            width: 110px;
            position: relative;
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(135deg, #6a11cb, #2575fc);
            border-radius: 6px;
            overflow: hidden;
            height: 45px;
            line-height: 25px;
            text-align: center;
            color: white;
            font-weight: 600;
        }

            /* Text movement */
            .custom-btn span {
                display: inline-block;
                position: relative;
                animation: moveText 5.2s ease-in-out infinite;
                z-index: 1;
            }

            /* Aurora shine overlay */
            .custom-btn::before {
                content: "";
                position: absolute;
                top: -100%;
                left: 0;
                width: 90%;
                height: 300%;
                background: linear-gradient(135deg, #4e54c8, #8f94fb);
                filter: blur(6px);
                opacity: 0;
                z-index: 0;
            }

        .custom-btn:hover {
            color: white;
            background: linear-gradient(135deg, #007bff, #6610f2);
        }

        .Custom-btn {
            color: white;
            display: flex;
            margin-right: 0px;
            margin-left: 10px;
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 10px;
            background: linear-gradient(135deg, #007bff, #6610f2);
        }

            .Custom-btn:hover {
                background: linear-gradient(135deg, #6610f2, #007bff);
            }

        /* Modern search bar */
        .modern-search {
            position: relative;
            width: 280px;
            transition: all 0.3s ease-in-out;
        }

            .modern-search input {
                width: 100%;
                padding: 10px 40px 10px 15px;
                border-radius: 25px;
                border: 1px solid #6c757d;
                background-color: #212529;
                color: #fff;
                transition: all 0.3s ease;
            }

                .modern-search input:focus {
                    outline: none;
                    background-color: #2c3034;
                    box-shadow: 0 0 5px rgba(0, 150, 255, 0.5);
                    border-color: #0d6efd;
                }

            .modern-search button {
                position: absolute;
                top: 50%;
                right: 10px;
                transform: translateY(-50%);
                border: none;
                background: transparent;
                color: #adb5bd;
                transition: color 0.3s ease;
            }

                .modern-search button:hover {
                    color: #0d6efd;
                }

            /* Optional: glow effect on focus */
            .modern-search input:focus + button i {
                color: #0d6efd;
            }

        /* Responsive */
        @@media (max-width: 768px) {
            .modern-search

        {
            width: 100%;
        }

        }

    </style>
</head>
<body>
    <!-- Start Main Top 
     <div class="main-top">
        <div class="container-fluid">
            <div class="row" style="height:50px">
                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                    <div class="text-slid-box">
                        <div id="offer-box" class="carouselTicker">
                            <ul class="offer-box">
                                <li>
                                    <i class="fab fa-opencart"></i> Off 10%! Shop Now Man
                                </li>
                                <li>
                                    <i class="fab fa-opencart"></i> 50% - 80% off on Fashion
                                </li>
                                <li>
                                    <i class="fab fa-opencart"></i> 20% off Entire Purchase Promo code: offT20
                                </li>
                                <li>
                                    <i class="fab fa-opencart"></i> Off 50%! Shop Now
                                </li>
                                <li>
                                    <i class="fab fa-opencart"></i> Off 10%! Shop Now Man
                                </li>
                                <li>
                                    <i class="fab fa-opencart"></i> 50% - 80% off on Fashion
                                </li>
                                <li>
                                    <i class="fab fa-opencart"></i> 20% off Entire Purchase Promo code: offT20
                                </li>
                                <li>
                                    <i class="fab fa-opencart"></i> Off 50%! Shop Now
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12" style="overflow:auto">
                    <div class="custom-select-box">
                        <select id="basic" class="selectpicker show-tick form-control" data-placeholder="$ USD">
                            <option>¥ JPY</option>
                            <option>$ USD</option>
                            <option>€ EUR</option>
                        </select>
                    </div>
                    <div class="right-phone-box">
                        <p>Call US :- <a href="#"> +11 900 800 100</a></p>
                    </div>
            @*         <div class="our-link">
                        <ul>
                            <li><a href="#">My Account</a></li>
                            <li><a href="#">Our location</a></li>
                            <li><a href="#">Contact Us</a></li>
                        </ul>
                    </div> *@
                </div>
            </div>
        </div>
    </div> -->
    <!-- End Main Top -->
    <!-- Start Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark custom-navbar sticky-top user-name"style="background-color:white;height:90px">
        <div class="container-fluid">
            <!-- Navbar Links -->
            <div class="collapse navbar-collapse" id="navbar-menu">
                <ul class="navbar-nav ml-auto align-items-center">
                @*     <li class="nav-item me-4" style="background-color:white">
                        <a href="@Url.Action("IndexCustomer", "Home")">
                            <img src="~/images/project-images/favicon.ico" style="width:40px;height:40px" />
                       </a>
                    </li> *@
                    <li class="nav-item mx-2">
                        <a asp-area="" asp-controller="Home" asp-action="IndexCustomer" class="nav-link custom-btn"><span style="font-size:15px">HOME</span></a>
                    </li>
                    <li class="nav-item mx-2">
                        <a asp-area="" asp-controller="Home" asp-action="About" class="nav-link custom-btn"><span style="font-size:15px">ABOUT US</span></a>
                    </li>
                    <li class="nav-item mx-2">
                        <a asp-area="" asp-controller="Home" asp-action="DisplayProduct" class="nav-link custom-btn"><span style="font-size:15px">PRODUCT</span></a>
                    </li>
                    <li class="nav-item mx-2">
                        <a asp-area="" asp-controller="Home" asp-action="Contact" class="nav-link custom-btn"><span style="font-size:15px">CONTACT US</span></a>
                    </li>
                    <li class="nav-item mx-2">
                        <a asp-area="" asp-controller="Home" asp-action="Feedback" class="nav-link custom-btn"><span style="font-size:15px">FEED BACK</span></a>
                    </li>
              @*       <li class="nav-item dropdown me-5"style="width:40px;"> 
                        <a id="bagDropdownToggle"
                           class="nav-link Custom-btn dropdown-toggle"
                           href="#"
                           data-toggle="dropdown"
                           aria-haspopup="true"
                           data-bs-auto-close="close"
                           aria-expanded="false">
                            <i class="fa fa-shopping-bag" style="margin:auto"></i>
                        </a>
                    </li> *@
                    @* Inside your main navbar <ul> where the bag icon was: *@

                    @await Component.InvokeAsync("CartSummary")
                 @*    <div class="search-product">
                        <form action="#">
                            <input class="form-control" placeholder="Search here..." type="text">
                            <button type="submit"> <i class="fa fa-search"></i> </button>
                        </form>
                    </div> *@
             @*        <li class="nav-item d-flex align-items-center" style="width:250px;margin-right:20px">
                        <div class="modern-search">
                            <form action="/Products/Search" method="get">
                                <input  type="text" name="query" placeholder="Search products..." aria-label="Search" />
                                <button type="submit" title="Search">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                </button>
                            </form>
                        </div>
                    </li> *@
                    <li class="nav-item d-flex align-items-center" style="width:250px;margin-right:10px">
                        <div class="modern-search">
                                <input type="text" name="query" placeholder="Search here..." aria-label="Search" />
                                <button type="submit" title="Search">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                </button>
                        </div>
                    </li>

                    @if (!string.IsNullOrEmpty(userId))
                    {
                        <li class="sidebar-item dropdown user-menu no-marker me-3">
                            <a class="nav-link p-0" href="#" data-bs-toggle="dropdown" aria-expanded="false"
                               style="width:50px;border-radius:20px;display:flex">
                                <img src="@profileImage"
                                     alt="User" title="@Name"
                                     class="rounded-circle user-avatar" style="width:60px;height:60px" />
                            </a>
                    @*         <strong class="user-name">Hi, @Name</strong> *@

                            <ul class="dropdown-menu dropdown-menu-end user-dropdown shadow">
                                <li class="text-center">
                                    <img id="profileImageDropdown" src="@profileImage"
                                         class="rounded-circle user-avatar mb-2" alt="Avatar"
                                         style="cursor:default;width:100px;height:100px" title="@Name" />
                                 @*    <input type="file" id="imageUpload" accept="image/*" style="display:none;" /> *@
                                    <div class="fw-semibold">@Name</div>
                                    <small class="text-muted">@email</small>
                                </li>
                                <li><hr class="dropdown-divider" /></li>
                                <li>
                                    <a class="dropdown-item text-danger fw-semibold"
                                       href="@Url.Action("Logout", "Home")">
                                        <i class="fa fa-sign-out-alt me-1"></i> Log out
                                    </a>
                                </li>
                               
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <a asp-area="" asp-controller="Home" asp-action="IndexAdmin" id="bagDropdownToggle"
                               class="nav-link Custom-btn dropdown-toggle">
                                Admin panel
                            </a>
                        </li>
                    }
                    else
                    {
                        <li class="gap-2 mt-1 d-inline-flex">
                            <button class="download-button" style="" onclick="location.href='@Url.Action("Login", "Home")'">
                                <span><strong>LogIn</strong> <i class="icon-download"></i></span>
                            </button>
                            <button class="download-button" onclick="location.href='@Url.Action("SignUp", "Home")'">
                                <span><strong>SignUp</strong> <i class="icon-download"></i></span>
                            </button>
                        </li>
                    }
                  
                </ul>

            </div>
        </div>
    </nav>

    @RenderBody()

    <!-- Start Footer  -->
    <footer>
        <div class="footer-main">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 col-md-12 col-sm-12">
                        <div class="footer-link">
                            <h4>Information</h4>
                            <ul>
                                <li><a href="#">About Us</a></li>
                                <li><a href="#">Customer Service</a></li>
                                <li><a href="#">Our Sitemap</a></li>
                                <li><a href="#">Terms &amp; Conditions</a></li>
                                <li><a href="#">Privacy Policy</a></li>
                                <li><a href="#">Delivery Information</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-12 col-sm-12">
                        <div class="footer-link-contact">
                            <h4>Contact Us</h4>
                            <ul>
                                <li>
                                    <p><i class="fas fa-map-marker-alt"></i>Address: Skardu (Gilgit-Baltistan)<br>Near Clifton Bridge</p>
                                </li>
                                <li>
                                    <p><i class="fas fa-phone-square"></i>Phone: <a href="tel:+92 3448853422">03448853422</a></p>
                                </li>
                                <li>
                                    <p><i class="fas fa-envelope"></i>Email: <a href="mailto:zeeshanabbas676767@gmail.com">zeeshanabbas676767@gmail.com</a></p>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-12 col-sm-12 mt-5">
                        <div class="footer-widget">
                            <ul>
                                <li><a href="#"><i class="fab fa-facebook" aria-hidden="true"></i></a></li>
                                <li><a href="#"><i class="fab fa-twitter" aria-hidden="true"></i></a></li>
                                <li><a href="#"><i class="fab fa-linkedin" aria-hidden="true"></i></a></li>
                                <li><a href="#"><i class="fab fa-google-plus" aria-hidden="true"></i></a></li>
                                <li><a href="#"><i class="fa fa-rss" aria-hidden="true"></i></a></li>
                                <li><a href="#"><i class="fab fa-pinterest-p" aria-hidden="true"></i></a></li>
                                <li><a href="#"><i class="fab fa-whatsapp" aria-hidden="true"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- End Footer  -->
    <!-- Start copyright  -->
    <div class="footer-copyright">
        <p class="footer-company">
            &copy; @DateTime.Now.Year - TheWayShop | All Right Reserved | Created By : Zeeshan Abbas | Follow my GitHub link: <a style="color:dodgerblue" href="https://github.com/zeeshanabbas676767-ux">https://github.com/zeeshanabbas676767-ux</a>
        </p>
    </div>
    <!-- End copyright  -->
    <a href="#" id="back-to-top" title="Back to top" style="display: none;">&uarr;</a>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    	<script src="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/js/jquery-3.2.1.min.js"></script>
	<script src="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/js/popper.min.js"></script>
	<script src="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/js/bootstrap.min.js"></script>
	<script src="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/js/jquery.superslides.min.js"></script>
	<script src="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/js/bootstrap-select.js"></script>
	<script src="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/js/inewsticker.js"></script>
	<script src="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/js/bootsnav.js"></script>
	<script src="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/js/images-loded.min.js"></script>
	<script src="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/js/isotope.min.js"></script>
	<script src="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/js/owl.carousel.min.js"></script>
	<script src="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/js/baguettebox.min.js"></script>
	<script src="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/js/form-validator.min.js"></script>
	<script src="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/js/contact-form-script.js"></script>
	<script src="~/templates/thewayshop free website template - free-css.com (1)/thewayshop/js/custom.js"></script>
    <script>
        // document.addEventListener("DOMContentLoaded", function () {
        //     const profileImageDropdown = document.getElementById("profileImageDropdown");
        //     const profileImage = document.querySelector(".user-avatar");
        //     const imageUpload = document.getElementById("imageUpload");

        //     // 🧩 Get values from Razor (ASP.NET Core)

        //             const userId = '@userId';
        //             const uploadUrl = '@uploadUrl';


        //     if (profileImageDropdown && imageUpload) {

        //         // When user clicks profile image inside dropdown
        //         profileImageDropdown.addEventListener("click", () => {
        //             imageUpload.click();
        //         });

        //         // When user selects a new image
        //         imageUpload.addEventListener("change", function () {
        //             const file = this.files[0];
        //             if (!file) return;

        //             const reader = new FileReader();
        //             reader.onload = function (e) {
        //                 const imageData = e.target.result;

        //                 // ✅ Instant preview for both images
        //                 if (profileImageDropdown) profileImageDropdown.src = imageData;
        //                 if (profileImage) profileImage.src = imageData;
        //             };
        //             reader.readAsDataURL(file);

        //             // ✅ Upload to server
        //             const formData = new FormData();
        //             formData.append("file", file);
        //             formData.append("userId", userId);

        //             fetch(uploadUrl, {
        //                 method: "POST",
        //                 body: formData
        //             })
        //                 .then(response => response.json())
        //                 .then(data => {
        //                     if (data.success) {
        //                         console.log("✅ Profile image updated successfully");
        //                     } else {
        //                         alert("⚠️ Failed to upload image.");
        //                     }
        //                 })
        //                 .catch(err => console.error("❌ Error uploading image:", err));
        //         });
        //     }

            // Prevent dropdown close on click inside
            document.querySelectorAll('.dropdown-menu').forEach(menu => {
                menu.addEventListener('click', e => e.stopPropagation());
            });
        // });
    </script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>






 
 